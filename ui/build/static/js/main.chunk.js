(this.webpackJsonpaoe2_head2head_ui=this.webpackJsonpaoe2_head2head_ui||[]).push([[0],{63:function(e,a,t){e.exports=t(93)},93:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(15),o=t.n(l),c=t(9),i=t(57),s=t(127),d=t(141);var m={palette:{primary:{main:"#794C39"},secondary:{main:"#2A2C2D"},status:{danger:"#cc412f",success:"#69af69",warning:"#C39568",neutral:"#98a6ad",info:"#794C39"},typography:{link:"#005DFF",highlight:"#B3D6FF"}},breakpoints:{values:{xs:0,sm:600,md:960,lg:1280,xl:2048}}},p=t(134),u=t(136),g=t(129),b=t(132),h=t(135),y=t(130),x=t(133),E=t(131),f=t(4),k=t(35),v=t.n(k);const w=Object(s.a)({link:{cursor:"pointer",color:m.palette.typography.link,"&:hover":{textDecoration:"underline"}},linkLight:{cursor:"pointer",color:"#ddd","&:hover":{textDecoration:"underline"}}});var C=e=>{const a=w();return r.a.createElement("span",{title:"aoe2.net link",className:e.light?a.linkLight:a.link,onClick:()=>{window.open("https://aoe2.net/#profile-".concat(e.playerId))}},e.playerName)};const N=Object(f.a)(e=>({head:{backgroundColor:e.palette.primary.main,color:e.palette.common.white},body:{fontSize:14}}))(g.a),_=Object(f.a)(e=>({root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}))(y.a),j=Object(s.a)({table:{minWidth:700},tableHeadCell:{cursor:"pointer","&:hover":{filter:"brightness(120%)"}},error:{color:m.palette.status.danger,background:m.palette.secondary.main,padding:"1rem"},link:{cursor:"pointer",color:m.palette.typography.link,"&:hover":{textDecoration:"underline"}}});var I=e=>{const a=r.a.useState("last_played_against"),t=Object(c.a)(a,2),n=t[0],l=t[1],o=r.a.useState("dsc"),i=Object(c.a)(o,2),s=i[0],d=i[1],m=j(),g=e=>{e===n?d("asc"===s?"dsc":"asc"):(d("name"===e?"asc":"dsc"),l(e))};if(e.loading)return r.a.createElement(E.a,null);if(e.error||!e.data)return r.a.createElement("div",{className:m.error},"No player exists with searched name on the given leaderboard.");const f=e.data;window.data=f;const k=Object.keys(f.tracker.records).filter(e=>{const a=f.tracker.records[e];return a.wins_against+a.losses_to>0}).sort((e,a)=>{const t=f.tracker.players[e],r=f.tracker.records[e],l=f.tracker.players[a],o=f.tracker.records[a];let c=r[n],i=o[n];return"name"===n?(c=t.name.toLowerCase(),i=l.name.toLowerCase()):"num_games"===n&&(c=r.wins_against+r.losses_to,i=o.wins_against+o.losses_to),"asc"===s?c<i?-1:1:"dsc"===s?c<i?1:-1:0});return r.a.createElement(b.a,{component:x.a},r.a.createElement(p.a,{className:m.table,"aria-label":"customized table"},r.a.createElement(h.a,null,r.a.createElement(y.a,null,r.a.createElement(N,{onClick:()=>{g("name")},className:m.tableHeadCell,align:"center"},"Player Name ","name"===n?"(".concat(s,")"):""),r.a.createElement(N,{onClick:()=>{g("rating")},className:m.tableHeadCell,align:"center"},"Rating Last Played"," ","rating"===n?"(".concat(s,")"):""),r.a.createElement(N,{onClick:()=>{g("num_games")},className:m.tableHeadCell,align:"center"},"Num Games ","num_games"===n?"(".concat(s,")"):""),r.a.createElement(N,{onClick:()=>{g("wins_against")},className:m.tableHeadCell,align:"center"},"Wins Against"," ","wins_against"===n?"(".concat(s,")"):""),r.a.createElement(N,{onClick:()=>{g("losses_to")},className:m.tableHeadCell,align:"center"},"Losses To ","losses_to"===n?"(".concat(s,")"):""),r.a.createElement(N,{onClick:()=>{g("last_played_against")},className:m.tableHeadCell,align:"center"},"Last Played"," ","last_played_against"===n?"(".concat(s,")"):""))),r.a.createElement(u.a,null,k.map(e=>{const a=f.tracker.players[e],t=f.tracker.records[e],n=v.a.utc(t.last_played_against);return r.a.createElement(_,{key:e},r.a.createElement(N,{component:"th",scope:"row"},r.a.createElement(C,{playerId:a.steam_id||a.profile_id,playerName:a.name})),r.a.createElement(N,{component:"th",scope:"row"},a.rating),r.a.createElement(N,{align:"right"},t.wins_against+t.losses_to),r.a.createElement(N,{align:"right"},t.wins_against),r.a.createElement(N,{align:"right"},t.losses_to),r.a.createElement(N,{align:"right"},v()(n).local().format("YYYY-MM-DD hh:mm:ss A")))}))))},O=t(142),S=t(144),L=t(140),T=t(145),P=t(139),D=t(137);var R=e=>r.a.createElement(D.a,{variant:"contained",onClick:e.onClick,disabled:e.disabled,color:e.type},e.children),H=t(143),A=t(138),z=t(55),F=t.n(z);const M=Object(f.a)(()=>({root:{background:"white"}}))(H.a);var W=e=>{const a=e.value,t=e.placeholder,n=e.onChange,l=e.onKeyDown;return r.a.createElement(M,{type:"text",value:a,placeholder:t,onChange:n,onKeyDown:l,inputProps:{maxLength:25},startAdornment:r.a.createElement(A.a,{position:"start"},r.a.createElement(F.a,null))})};const G=Object(f.a)(()=>({root:{color:"black","&.Mui-focused":{color:"black"}}}))(P.a),B=Object(s.a)(()=>({root:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"550px",padding:"10px",background:"rgba(0, 0, 0, 0.1)",boxShadow:"0px 0px 5px 4px rgba(0, 0, 0, 0.1)"}}));var Y=e=>{const a=r.a.useState(e.defaultName||""),t=Object(c.a)(a,2),n=t[0],l=t[1],o=r.a.useState(e.defaultLeaderboardName||"solo"),i=Object(c.a)(o,2),s=i[0],d=i[1],m=B();return r.a.createElement("div",{className:m.root},r.a.createElement(W,{value:n,onChange:e=>{l((null===e||void 0===e?void 0:e.target).value)},onKeyDown:a=>{13!==a.which||e.isLoading||n.length<3||e.onSubmit(n.trim(),s)}}),r.a.createElement("div",null,r.a.createElement(T.a,{component:"fieldset"},r.a.createElement(G,null,"Leaderboard"),r.a.createElement(S.a,{"aria-label":"leaderboard",name:"leaderboard1",value:s,onChange:e=>{d(e.target.value)}},r.a.createElement(L.a,{value:"solo",control:r.a.createElement(O.a,null),label:"Solo"}),r.a.createElement(L.a,{value:"team",control:r.a.createElement(O.a,null),label:"Team"})))),r.a.createElement(R,{type:"primary",disabled:e.isLoading||n.length<3,onClick:()=>{e.onSubmit(n,s)}},"Search"))};const J=Object(s.a)({playerLink:{background:"rgba(255, 255, 255, 0.3)",borderRadius:"5px",padding:"5px"}});var K=e=>{const a=J();return 0===e.numRecords?r.a.createElement("div",null):r.a.createElement("div",null,"Displaying ",e.numRecords,' players for leaderboard "',e.leaderboardName,'", player'," ",r.a.createElement("span",{className:a.playerLink},r.a.createElement(C,{playerId:e.playerId,playerName:e.playerName})))};const U=Object(s.a)({root:{padding:"10px",background:"rgba(0, 0, 0, 0.1)",boxShadow:"0px 0px 5px 4px rgba(0, 0, 0, 0.1)",width:"550px",overflow:"hidden"},tableContainer:{display:"flex",justifyContent:"center"},table:{background:"rgba(0, 0, 0, 0.4)",boxShadow:"0px 0px 5px 4px rgba(0, 0, 0, 0.4)",padding:"10px",marginTop:"16px",color:"white"},inProgress:{color:m.palette.status.neutral,background:"black",padding:"5px",borderRadius:"5px"},victory:{color:m.palette.status.success,background:"black",padding:"5px",borderRadius:"5px"},loss:{color:m.palette.status.danger,background:"black",padding:"5px",borderRadius:"5px"},cell:{padding:"5px"}});var V=e=>{const a=U();return r.a.createElement("div",{className:a.root},"Most Recent Game"," ",e.inProgress?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:a.inProgress},"In Progress")," ",r.a.createElement("span",null," Game Id: ",e.matchId)):null,!e.inProgress&&e.isWin?r.a.createElement("span",{className:a.victory},"Victory"):null,e.inProgress||e.isWin?null:r.a.createElement("span",{className:a.loss},"Loss"),r.a.createElement("div",{className:a.tableContainer},r.a.createElement("table",{className:a.table},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,e.playerName,"'s Team"),r.a.createElement("th",null,"Opposing Team"))),r.a.createElement("tbody",null,e.otherTeamPlayers.map((t,n)=>{const l=e.myTeamPlayers[n];return r.a.createElement("tr",{key:"row-"+n},r.a.createElement("td",{className:a.cell,style:{textAlign:"left"}},r.a.createElement(C,{playerId:l.profileId,playerName:"".concat(l.name," (").concat(l.rating,")"),light:!0})),r.a.createElement("td",{className:a.cell,style:{textAlign:"right"}},r.a.createElement(C,{playerId:t.profileId,playerName:"".concat(t.name," (").concat(t.rating,")"),light:!0})))})))))},$=t(27),q=t.n($),Q=t(36),X=t(56),Z=t.n(X);const ee=window.location.origin,ae={},te={},ne=Z.a.create({baseURL:ee}),re=(e,a,t)=>e+"/"+a+"/"+(t||""),le=Object(i.a)(m),oe=Object(s.a)(e=>({app:{textAlign:"center",position:"relative"},appHeader:{fontSize:"1.5rem",color:"black",display:"flex",justifyContent:"center",position:"fixed",top:"0px",width:"100%",background:"#C39568"},headerSize:{position:"relative",height:"50px",width:"1200px",display:"flex",justifyContent:"space-between"},headerLeft:{display:"flex",justifyContent:"flex-start",alignItems:"center",height:"100%",color:"white",padding:"0px 10px",background:"rgba(0, 0, 0, 0.1)",boxShadow:"0px -4px 5px 4px rgba(0, 0, 0, 0.1)"},headerRight:{display:"flex",justifyContent:"flex-end",alignItems:"center",height:"100%"},headerIcon:{width:"24px",cursor:"pointer",marginLeft:"10px",borderRadius:"24px",background:"rgba(0, 0, 0, 0.1)",boxShadow:"0px 0px 5px 4px rgba(0, 0, 0, 0.1)",transition:"background 0.5s, box-shadow 0.5s","&:hover":{background:"rgba(0, 0, 0, 0.3)",boxShadow:"0px 0px 5px 4px rgba(0, 0, 0, 0.3)"}},pageContent:{marginTop:"50px"},backgroundImageContainer:{display:"flex",justifyContent:"center"},backgroundImage:{position:"fixed",zIndex:-1,opacity:.25,[e.breakpoints.up("xl")]:{width:"3072px"}},playerNameInputContainer:{display:"flex",justifyContent:"center",marginTop:"2rem"},currentGameContainer:{marginTop:"2rem",display:"flex",justifyContent:"center"},infoContainer:{marginTop:"2rem"},tableContainer:{display:"flex",justifyContent:"center",marginTop:"2rem"},tableSize:{width:"1200px",marginBottom:"5rem"},errorText:{color:e.palette.error.main},appFooter:{position:"absolute",bottom:0,margin:"2rem",width:"calc(100% - 4rem)"}}));var ce=()=>{const e=oe(),a=window.location.hash.slice(1).split(",")[0].slice(0,25)||"";let t=window.location.hash.slice(1).split(",")[1];"solo"!==t&&"team"!==t&&(t="");const l=r.a.useState(a),o=Object(c.a)(l,2),i=o[0],s=o[1],m=r.a.useState(t),p=Object(c.a)(m,2),u=p[0],g=p[1],b=function(e,a){const t=Object(n.useState)(null),r=Object(c.a)(t,2),l=r[0],o=r[1],i=Object(n.useState)(!0),s=Object(c.a)(i,2),d=s[0],m=s[1],p=Object(n.useState)(!1),u=Object(c.a)(p,2),g=u[0],b=u[1];return Object(n.useEffect)(()=>{(function(){var t=Object(Q.a)(q.a.mark((function t(){var n,r,l;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=4;break}return m(!1),b(!1),t.abrupt("return");case 4:if(n=re("GET",e,JSON.stringify(a)),!(r=ae[n])){t.next=12;break}o(r),m(!1),b(!1),t.next=33;break;case 12:if(te[n]){t.next=33;break}return t.prev=13,te[n]=!0,m(!0),t.next=18,ne.get(e,{params:a});case 18:l=t.sent,o(l),m(!1),b(!1),te[n]=!1,ae[n]=l,t.next=33;break;case 27:t.prev=27,t.t0=t.catch(13),console.error("Failed to get",t.t0),b(!0),o(null),m(!1);case 33:case"end":return t.stop()}}),t,null,[[13,27]])})));return function(){return t.apply(this,arguments)}})()()},[e,a]),[l,d,g]}(i?"lookup/".concat(i,"/").concat(u):""),h=Object(c.a)(b,3),y=h[0],x=h[1],E=h[2];return r.a.createElement(d.a,{theme:le},r.a.createElement("div",{className:e.app},r.a.createElement("div",{className:e.pageContent},r.a.createElement("div",{className:e.backgroundImageContainer},r.a.createElement("img",{src:"/static/background.jpg",className:e.backgroundImage,alt:"bg"})),r.a.createElement("div",{className:e.playerNameInputContainer},r.a.createElement(Y,{isLoading:x,onSubmit:(e,a)=>{s(e),g(a),window.location.hash="".concat(e,",").concat(a)},defaultName:a,defaultLeaderboardName:t})),r.a.createElement("div",{className:e.currentGameContainer},!x&&(null===y||void 0===y?void 0:y.data.most_recent_game)?r.a.createElement(V,((e,a)=>{let t=e,n=null;const r=a.players.reduce((a,r)=>r.profile_id===e?(t=r.name,n=r.won,r.team):a,1),l=a.players.filter(e=>e.team===r).map(e=>({profileId:e.profile_id,name:e.name,rating:e.rating})),o=a.players.filter(e=>e.team!==r).map(e=>({profileId:e.profile_id,name:e.name,rating:e.rating}));return{playerId:e,playerName:t,matchId:a.match_id,inProgress:null===n||!a.finished,isWin:!!n,myTeamPlayers:l,otherTeamPlayers:o}})(null===y||void 0===y?void 0:y.data.profile_id,null===y||void 0===y?void 0:y.data.most_recent_game)):null),r.a.createElement("div",{className:e.infoContainer},x?null:r.a.createElement(K,{playerName:null===y||void 0===y?void 0:y.data.player_name,playerId:null===y||void 0===y?void 0:y.data.profile_id,leaderboardName:u,numRecords:Object.keys((null===y||void 0===y?void 0:y.data.tracker.records)||{}).length})),r.a.createElement("div",{className:e.tableContainer},r.a.createElement("div",{className:e.tableSize},i?r.a.createElement(I,{loading:x,error:E,data:null===y||void 0===y?void 0:y.data}):null)),r.a.createElement("header",{className:e.appHeader},r.a.createElement("div",{className:e.headerSize},r.a.createElement("div",{className:e.headerLeft},"AOE2: DE Head2Head - Matchup Tracker"),r.a.createElement("div",{className:e.headerRight},r.a.createElement("img",{src:"static/aoe2net.png",alt:"aoe2net",title:"aoe2.net",className:e.headerIcon,onClick:()=>{window.open("https://aoe2.net/")}}),r.a.createElement("img",{src:"static/github.png",alt:"github",title:"github",className:e.headerIcon,onClick:()=>{window.open("https://github.com/benjamin-t-brown/aoe2de_head2head")}})))),r.a.createElement("footer",{className:e.appFooter},"This site is not affiliated with or endorsed by Microsoft Corporation. Age of Empires II: Definitive Edition is a trademark or registered trademark of Microsoft Corporation in the U.S. and other countries."))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ce,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[63,1,2]]]);
//# sourceMappingURL=main.chunk.js.map