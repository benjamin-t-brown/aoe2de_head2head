(this.webpackJsonpaoe2_head2head_ui=this.webpackJsonpaoe2_head2head_ui||[]).push([[0],{63:function(e,a,t){e.exports=t(93)},93:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(15),l=t.n(o),c=t(9),s=t(57),i=t(130),d=t(141);var m={palette:{primary:{main:"#794C39"},secondary:{main:"#2A2C2D"},status:{danger:"#cc412f",success:"#69af69",warning:"#C39568",neutral:"#98a6ad",info:"#794C39"},typography:{link:"#005DFF",highlight:"#B3D6FF"}},breakpoints:{values:{xs:0,sm:600,md:960,lg:1280,xl:2048}}},p=t(134),u=t(136),g=t(128),b=t(132),h=t(135),x=t(129),y=t(133),E=t(131),f=t(4),k=t(35),v=t.n(k);const w=Object(f.a)(e=>({head:{backgroundColor:e.palette.primary.main,color:e.palette.common.white},body:{fontSize:14}}))(g.a),C=Object(f.a)(e=>({root:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover}}}))(x.a),N=Object(i.a)({table:{minWidth:700},tableHeadCell:{cursor:"pointer","&:hover":{filter:"brightness(120%)"}},error:{color:m.palette.status.danger,background:m.palette.secondary.main,padding:"1rem"},link:{cursor:"pointer",color:m.palette.typography.link,"&:hover":{textDecoration:"underline"}}});var _=e=>{const a=r.a.useState("last_played_against"),t=Object(c.a)(a,2),n=t[0],o=t[1],l=r.a.useState("dsc"),s=Object(c.a)(l,2),i=s[0],d=s[1],m=N(),g=e=>{e===n?d("asc"===i?"dsc":"asc"):(d("name"===e?"asc":"dsc"),o(e))};if(e.loading)return r.a.createElement(E.a,null);if(e.error||!e.data)return r.a.createElement("div",{className:m.error},"No player exists with searched name on the given leaderboard.");const f=e.data;window.data=f;const k=Object.keys(f.tracker.records).filter(e=>{const a=f.tracker.records[e];return a.wins_against+a.losses_to>0}).sort((e,a)=>{const t=f.tracker.players[e],r=f.tracker.records[e],o=f.tracker.players[a],l=f.tracker.records[a];let c=r[n],s=l[n];return"name"===n?(c=t.name.toLowerCase(),s=o.name.toLowerCase()):"num_games"===n&&(c=r.wins_against+r.losses_to,s=l.wins_against+l.losses_to),"asc"===i?c<s?-1:1:"dsc"===i?c<s?1:-1:0});return r.a.createElement(b.a,{component:y.a},r.a.createElement(p.a,{className:m.table,"aria-label":"customized table"},r.a.createElement(h.a,null,r.a.createElement(x.a,null,r.a.createElement(w,{onClick:()=>{g("name")},className:m.tableHeadCell,align:"center"},"Player Name ","name"===n?"(".concat(i,")"):""),r.a.createElement(w,{onClick:()=>{g("num_games")},className:m.tableHeadCell,align:"center"},"Num Games ","num_games"===n?"(".concat(i,")"):""),r.a.createElement(w,{onClick:()=>{g("wins_against")},className:m.tableHeadCell,align:"center"},"Wins Against"," ","wins_against"===n?"(".concat(i,")"):""),r.a.createElement(w,{onClick:()=>{g("losses_to")},className:m.tableHeadCell,align:"center"},"Losses To ","losses_to"===n?"(".concat(i,")"):""),r.a.createElement(w,{onClick:()=>{g("last_played_against")},className:m.tableHeadCell,align:"center"},"Last Played"," ","last_played_against"===n?"(".concat(i,")"):""))),r.a.createElement(u.a,null,k.map(e=>{const a=f.tracker.players[e],t=f.tracker.records[e],n=v.a.utc(t.last_played_against);return r.a.createElement(C,{key:e},r.a.createElement(w,{component:"th",scope:"row"},r.a.createElement("span",{className:m.link,onClick:()=>{window.open("https://aoe2.net/#profile-".concat(a.steam_id||a.profile_id))}},a.name)),r.a.createElement(w,{align:"right"},t.wins_against+t.losses_to),r.a.createElement(w,{align:"right"},t.wins_against),r.a.createElement(w,{align:"right"},t.losses_to),r.a.createElement(w,{align:"right"},v()(n).local().format("YYYY-MM-DD hh:mm:ss A")))}))))},j=t(142),O=t(144),S=t(140),I=t(145),T=t(139),L=t(137);var P=e=>r.a.createElement(L.a,{variant:"contained",onClick:e.onClick,disabled:e.disabled,color:e.type},e.children),D=t(143),R=t(138),H=t(55),A=t.n(H);const z=Object(f.a)(()=>({root:{background:"white"}}))(D.a);var F=e=>{const a=e.value,t=e.placeholder,n=e.onChange,o=e.onKeyDown;return r.a.createElement(z,{type:"text",value:a,placeholder:t,onChange:n,onKeyDown:o,inputProps:{maxLength:25},startAdornment:r.a.createElement(R.a,{position:"start"},r.a.createElement(A.a,null))})};const M=Object(f.a)(()=>({root:{color:"black","&.Mui-focused":{color:"black"}}}))(T.a),W=Object(i.a)(()=>({root:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"550px",padding:"10px",background:"rgba(0, 0, 0, 0.1)",boxShadow:"0px 0px 5px 4px rgba(0, 0, 0, 0.1)"}}));var G=e=>{const a=r.a.useState(e.defaultName||""),t=Object(c.a)(a,2),n=t[0],o=t[1],l=r.a.useState(e.defaultLeaderboardName||"solo"),s=Object(c.a)(l,2),i=s[0],d=s[1],m=W();return r.a.createElement("div",{className:m.root},r.a.createElement(F,{value:n,onChange:e=>{o((null===e||void 0===e?void 0:e.target).value)},onKeyDown:a=>{13!==a.which||e.isLoading||n.length<3||e.onSubmit(n.trim(),i)}}),r.a.createElement("div",null,r.a.createElement(I.a,{component:"fieldset"},r.a.createElement(M,null,"Leaderboard"),r.a.createElement(O.a,{"aria-label":"leaderboard",name:"leaderboard1",value:i,onChange:e=>{d(e.target.value)}},r.a.createElement(S.a,{value:"solo",control:r.a.createElement(j.a,null),label:"Solo"}),r.a.createElement(S.a,{value:"team",control:r.a.createElement(j.a,null),label:"Team"})))),r.a.createElement(P,{type:"primary",disabled:e.isLoading||n.length<3,onClick:()=>{e.onSubmit(n,i)}},"Search"))};const B=Object(i.a)({link:{cursor:"pointer",color:m.palette.typography.link,"&:hover":{textDecoration:"underline"}}});var Y=e=>{const a=B();return 0===e.numRecords?r.a.createElement("div",null):r.a.createElement("div",null,"Displaying ",e.numRecords,' players for leaderboard "',e.leaderboardName,'", player'," ",r.a.createElement("span",{className:a.link,onClick:()=>{window.open("https://aoe2.net/#profile-".concat(e.playerId))}},e.playerName))};const J=Object(i.a)({root:{padding:"10px",background:"rgba(0, 0, 0, 0.1)",boxShadow:"0px 0px 5px 4px rgba(0, 0, 0, 0.1)"},tableContainer:{display:"flex",justifyContent:"center"},table:{background:"rgba(0, 0, 0, 0.4)",boxShadow:"0px 0px 5px 4px rgba(0, 0, 0, 0.4)",padding:"10px",marginTop:"16px",color:"white"},inProgress:{color:m.palette.status.neutral,background:"black",padding:"5px",borderRadius:"5px"},victory:{color:m.palette.status.success,background:"black",padding:"5px",borderRadius:"5px"},loss:{color:m.palette.status.danger,background:"black",padding:"5px",borderRadius:"5px"}});var K=e=>{const a=J();return r.a.createElement("div",{className:a.root},"Most Recent Game"," ",e.inProgress?r.a.createElement("span",{className:a.inProgress},"In Progress"):null,!e.inProgress&&e.isWin?r.a.createElement("span",{className:a.victory},"Victory"):null,e.inProgress||e.isWin?null:r.a.createElement("span",{className:a.loss},"Loss"),r.a.createElement("div",{className:a.tableContainer},r.a.createElement("table",{className:a.table},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,e.playerName,"'s Team"),r.a.createElement("th",null,"Opposing Team"))),r.a.createElement("tbody",null,e.otherTeamPlayers.map((a,t)=>{const n=e.myTeamPlayers[t];return r.a.createElement("tr",{key:"row-"+t},r.a.createElement("td",{style:{textAlign:"left"}},n.name," (",n.rating,")"),r.a.createElement("td",{style:{textAlign:"right"}},a.name," (",a.rating,")"))})))))},U=t(26),V=t.n(U),$=t(36),q=t(56),Q=t.n(q);const X=window.location.origin,Z={},ee={},ae=Q.a.create({baseURL:X}),te=(e,a,t)=>e+"/"+a+"/"+(t||""),ne=Object(s.a)(m),re=Object(i.a)(e=>({app:{textAlign:"center",position:"relative"},appHeader:{fontSize:"1.5rem",color:"black",display:"flex",justifyContent:"center",position:"fixed",top:"0px",width:"100%",background:"#C39568"},headerSize:{position:"relative",height:"50px",width:"1200px",display:"flex",justifyContent:"space-between"},headerLeft:{display:"flex",justifyContent:"flex-start",alignItems:"center",height:"100%",color:"white",padding:"0px 10px",background:"rgba(0, 0, 0, 0.1)",boxShadow:"0px -4px 5px 4px rgba(0, 0, 0, 0.1)"},headerRight:{display:"flex",justifyContent:"flex-end",alignItems:"center",height:"100%"},headerIcon:{width:"24px",cursor:"pointer",marginLeft:"10px",borderRadius:"24px",background:"rgba(0, 0, 0, 0.1)",boxShadow:"0px 0px 5px 4px rgba(0, 0, 0, 0.1)",transition:"background 0.5s, box-shadow 0.5s","&:hover":{background:"rgba(0, 0, 0, 0.3)",boxShadow:"0px 0px 5px 4px rgba(0, 0, 0, 0.3)"}},pageContent:{marginTop:"50px"},backgroundImageContainer:{display:"flex",justifyContent:"center"},backgroundImage:{position:"fixed",zIndex:-1,opacity:.25,[e.breakpoints.up("xl")]:{width:"3072px"}},playerNameInputContainer:{display:"flex",justifyContent:"center",marginTop:"2rem"},currentGameContainer:{marginTop:"2rem"},infoContainer:{marginTop:"2rem"},tableContainer:{display:"flex",justifyContent:"center",marginTop:"2rem"},tableSize:{width:"1200px",marginBottom:"5rem"},errorText:{color:e.palette.error.main},appFooter:{position:"absolute",bottom:0,margin:"2rem",width:"calc(100% - 4rem)"}}));var oe=()=>{const e=re(),a=window.location.hash.slice(1).split(",")[0].slice(0,25)||"";let t=window.location.hash.slice(1).split(",")[1];"solo"!==t&&"team"!==t&&(t="");const o=r.a.useState(a),l=Object(c.a)(o,2),s=l[0],i=l[1],m=r.a.useState(t),p=Object(c.a)(m,2),u=p[0],g=p[1],b=function(e,a){const t=Object(n.useState)(null),r=Object(c.a)(t,2),o=r[0],l=r[1],s=Object(n.useState)(!0),i=Object(c.a)(s,2),d=i[0],m=i[1],p=Object(n.useState)(!1),u=Object(c.a)(p,2),g=u[0],b=u[1];return Object(n.useEffect)(()=>{(function(){var t=Object($.a)(V.a.mark((function t(){var n,r,o;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=4;break}return m(!1),b(!1),t.abrupt("return");case 4:if(n=te("GET",e,JSON.stringify(a)),!(r=Z[n])){t.next=12;break}l(r),m(!1),b(!1),t.next=33;break;case 12:if(ee[n]){t.next=33;break}return t.prev=13,ee[n]=!0,m(!0),t.next=18,ae.get(e,{params:a});case 18:o=t.sent,l(o),m(!1),b(!1),ee[n]=!1,Z[n]=o,t.next=33;break;case 27:t.prev=27,t.t0=t.catch(13),console.error("Failed to get",t.t0),b(!0),l(null),m(!1);case 33:case"end":return t.stop()}}),t,null,[[13,27]])})));return function(){return t.apply(this,arguments)}})()()},[e,a]),[o,d,g]}(s?"lookup/".concat(s,"/").concat(u):""),h=Object(c.a)(b,3),x=h[0],y=h[1],E=h[2];return r.a.createElement(d.a,{theme:ne},r.a.createElement("div",{className:e.app},r.a.createElement("div",{className:e.pageContent},r.a.createElement("div",{className:e.backgroundImageContainer},r.a.createElement("img",{src:"/static/background.jpg",className:e.backgroundImage,alt:"bg"})),r.a.createElement("div",{className:e.playerNameInputContainer},r.a.createElement(G,{isLoading:y,onSubmit:(e,a)=>{i(e),g(a),window.location.hash="".concat(e,",").concat(a)},defaultName:a,defaultLeaderboardName:t})),r.a.createElement("div",{className:e.currentGameContainer},!y&&(null===x||void 0===x?void 0:x.data.most_recent_game)?r.a.createElement(K,((e,a)=>{let t=e,n=!1;const r=a.players.reduce((a,r)=>r.profile_id===e?(t=r.name,n=r.won,r.team):a,1),o=a.players.filter(e=>e.team===r),l=a.players.filter(e=>e.team!==r);return{playerId:e,playerName:t,inProgress:!a.finished,isWin:n,myTeamPlayers:o,otherTeamPlayers:l}})(null===x||void 0===x?void 0:x.data.profile_id,null===x||void 0===x?void 0:x.data.most_recent_game)):null),r.a.createElement("div",{className:e.infoContainer},y?null:r.a.createElement(Y,{playerName:null===x||void 0===x?void 0:x.data.player_name,playerId:null===x||void 0===x?void 0:x.data.profile_id,leaderboardName:u,numRecords:Object.keys((null===x||void 0===x?void 0:x.data.tracker.records)||{}).length})),r.a.createElement("div",{className:e.tableContainer},r.a.createElement("div",{className:e.tableSize},s?r.a.createElement(_,{loading:y,error:E,data:null===x||void 0===x?void 0:x.data}):null)),r.a.createElement("header",{className:e.appHeader},r.a.createElement("div",{className:e.headerSize},r.a.createElement("div",{className:e.headerLeft},"AOE2: DE Head2Head - Matchup Tracker"),r.a.createElement("div",{className:e.headerRight},r.a.createElement("img",{src:"static/aoe2net.png",alt:"aoe2net",title:"aoe2.net",className:e.headerIcon,onClick:()=>{window.open("https://aoe2.net/")}}),r.a.createElement("img",{src:"static/github.png",alt:"github",title:"github",className:e.headerIcon,onClick:()=>{window.open("https://github.com/benjamin-t-brown/aoe2de_head2head")}})))),r.a.createElement("footer",{className:e.appFooter},"This site is not affiliated with or endorsed by Microsoft Corporation. Age of Empires II: Definitive Edition is a trademark or registered trademark of Microsoft Corporation in the U.S. and other countries."))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[63,1,2]]]);
//# sourceMappingURL=main.chunk.js.map