(this.webpackJsonpaoe2_head2head_ui=this.webpackJsonpaoe2_head2head_ui||[]).push([[0],{112:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(10),l=t.n(o),i=t(11),c=t(76),s=t(154),d=t(170);var m={palette:{primary:{main:"#794C39"},secondary:{main:"#2A2C2D"},status:{danger:"#cc412f",success:"#69af69",warning:"#C39568",neutral:"#98a6ad",info:"#794C39"},typography:{link:"#005DFF",highlight:"#B3D6FF"}},breakpoints:{values:{xs:0,sm:600,md:960,lg:1280,xl:2048}}},p=t(52),u=t(164),g=t(166),b=t(158),h=t(163),f=t(165),x=t(159),E=t(161),y=t(172),k=t(162),v=t(74),w=t.n(v),C=t(73),N=t.n(C),j=t(48),O=t.n(j),_=t(4);const I=Object(s.a)({link:{cursor:"pointer",color:m.palette.typography.link,"&:hover":{textDecoration:"underline"}},linkLight:{cursor:"pointer",color:"#adf","&:hover":{textDecoration:"underline"}}});var S=e=>{const a=I();let t="https://aoe2.net/#profile-".concat(e.playerId);return r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",title:"aoe2.net: ".concat(e.playerName),className:e.light?a.linkLight:a.link,href:t},e.playerName)},L=t(171);const D=Object(_.a)({head:{backgroundColor:m.palette.primary.main,color:"white"},body:{fontSize:14,color:e=>e.isDarkMode?"white":"black"}})(e=>{const a=Object(p.a)({},e);return delete a.isDarkMode,r.a.createElement(b.a,a)}),R=Object(_.a)({root:{"&:nth-of-type(odd)":{backgroundColor:e=>e.isDarkMode?"#480a08":"#fafafa"},"&:nth-of-type(even)":{backgroundColor:e=>e.isDarkMode?"#491c09":"#fff"}}})(e=>{const a=Object(p.a)({},e);return delete a.isDarkMode,r.a.createElement(x.a,a)}),M=Object(_.a)({root:{"& label":{color:"#BEBEBE"},"&:hover":{borderBottomColor:"white"},"& input":{color:"white"},"& label.Mui-focused":{color:"#EFEFEF"},"& .MuiInput-underline:hover":{borderBottomColor:"white"},"& .MuiInput-underline:before":{borderBottomColor:"white"},"& .MuiInput-underline:after":{borderBottomColor:"white"}}})(L.a),T=({sortDirection:e})=>{const a={height:"16px",position:"relative",top:"2px"};return"dsc"===e?r.a.createElement(N.a,{style:a}):r.a.createElement(w.a,{style:a})},P=Object(s.a)({table:{minWidth:700},tableHeadCell:{cursor:"pointer","&:hover":{filter:"brightness(120%)"}},error:{color:m.palette.status.danger,background:m.palette.secondary.main,padding:"1rem"},playerNameCell:{display:"flex",alignItems:"center"},searchIcon:{fontSize:"16px",position:"relative",top:"3px",marginRight:"5px"},preHeader:{display:"flex",justifyContent:"space-between"},leftPreHeader:{display:"flex",alignItems:"flex-start",position:"relative",top:"18px"},filterName:{position:"relative",padding:"5px",borderRadius:"5px",marginBottom:"2px",background:m.palette.primary.main},darkMode:{marginBottom:"5px",display:"flex",alignItems:"flex-end"},pagination:{marginBottom:"5px",marginRight:"5px",position:"relative",top:"-5px"}});var H=e=>{const a=r.a.useState("last_played_against"),t=Object(i.a)(a,2),n=t[0],o=t[1],l=r.a.useState("dsc"),c=Object(i.a)(l,2),s=c[0],d=c[1],m=r.a.useState(""),p=Object(i.a)(m,2),b=p[0],v=p[1],w=r.a.useState(0),C=Object(i.a)(w,2),N=C[0],j=C[1],_=r.a.useState("true"===localStorage.getItem("aoe2de-player-tracker-dark-mode")),I=Object(i.a)(_,2),L=I[0],H=I[1],B=P(e),F=e=>{e===n?d("asc"===s?"dsc":"asc"):(d("name"===e?"asc":"dsc"),o(e))};if(e.loading)return r.a.createElement(k.a,null);if(e.error||!e.data)return r.a.createElement("div",{className:B.error},"No player exists with searched name on the given leaderboard.");const U=e.data;window.data=U;const z=Math.ceil(Object.keys(U.tracker.records).length/75),W=((e,a,t,n,r,o,l)=>Object.keys(e).filter(a=>{const t=e[a];return t.wins_against+t.losses_to>0}).filter(e=>{if(l){return a[e].name.toLowerCase().includes(l.toLowerCase())}return!0}).sort((r,o)=>{const l=a[r],i=e[r],c=a[o],s=e[o];let d=i[t],m=s[t];return"name"===t?(d=l.name.toLowerCase(),m=c.name.toLowerCase()):"num_games"===t&&(d=i.wins_against+i.losses_to,m=s.wins_against+s.losses_to),"rating"===t&&(d=l.rating,m=c.rating),"asc"===n?d<m?-1:1:"dsc"===n?d<m?1:-1:0}).slice(r*o,r*o+o))(U.tracker.records,U.tracker.players,n,s,N,75,b);return r.a.createElement("div",null,r.a.createElement("div",{className:B.preHeader},r.a.createElement("div",{className:B.leftPreHeader},z>1?r.a.createElement(y.a,{className:B.pagination,count:z,page:N+1,onChange:(e,a)=>{j(a-1)},shape:"rounded"}):null,r.a.createElement("span",{className:B.darkMode},r.a.createElement("label",{htmlFor:"dark-mode"},"Use Dark Table"),r.a.createElement("input",{id:"dark-mode",name:"dark-mode",type:"checkbox",checked:L,onChange:()=>{H(!L),localStorage.setItem("aoe2de-player-tracker-dark-mode",(!L).toString())}}))),r.a.createElement("div",{className:B.filterName},r.a.createElement(M,{label:"Filter",value:b,onChange:e=>{v(e.target.value)}}))),r.a.createElement(h.a,{component:E.a},r.a.createElement(u.a,{className:B.table,"aria-label":"customized table"},r.a.createElement(f.a,null,r.a.createElement(x.a,null,r.a.createElement(D,{onClick:()=>{F("name")},className:B.tableHeadCell,align:"center"},"Player Name"," ","name"===n?r.a.createElement(T,{sortDirection:s}):""),r.a.createElement(D,{onClick:()=>{F("rating")},className:B.tableHeadCell,align:"center"},"Rating Last Played"," ","rating"===n?r.a.createElement(T,{sortDirection:s}):""),r.a.createElement(D,{onClick:()=>{F("num_games")},className:B.tableHeadCell,align:"center"},"Num Games"," ","num_games"===n?r.a.createElement(T,{sortDirection:s}):""),r.a.createElement(D,{onClick:()=>{F("wins_against")},className:B.tableHeadCell,align:"center"},"Wins Against"," ","wins_against"===n?r.a.createElement(T,{sortDirection:s}):""),r.a.createElement(D,{onClick:()=>{F("losses_to")},className:B.tableHeadCell,align:"center"},"Losses To"," ","losses_to"===n?r.a.createElement(T,{sortDirection:s}):""),r.a.createElement(D,{onClick:()=>{F("last_played_against")},className:B.tableHeadCell,align:"center"},"Last Played"," ","last_played_against"===n?r.a.createElement(T,{sortDirection:s}):""))),r.a.createElement(g.a,null,W.map(a=>{const t=U.tracker.players[a],n=U.tracker.records[a];return r.a.createElement(R,{key:a,isDarkMode:L},r.a.createElement(D,{component:"td",scope:"row",isDarkMode:L},r.a.createElement("span",{title:'Lookup head2head for: "'.concat(t.name,'"')},r.a.createElement(O.a,{className:B.searchIcon,onClick:()=>{window.location.hash="".concat(t.name,",").concat(e.leaderboardName)}})),r.a.createElement(S,{playerId:t.steam_id||t.profile_id,playerName:t.name,light:L})),r.a.createElement(D,{component:"td",scope:"row",isDarkMode:L},t.rating),r.a.createElement(D,{align:"right",isDarkMode:L},n.wins_against+n.losses_to),r.a.createElement(D,{align:"right",isDarkMode:L},n.wins_against),r.a.createElement(D,{align:"right",isDarkMode:L},n.losses_to),r.a.createElement(D,{align:"right",isDarkMode:L},new Date(n.last_played_against+"z").toLocaleString()))})))))},B=t(173),F=t(174),U=t(169),z=t(175),W=t(160);const A=e=>{const a=(e=decodeURIComponent(e)).slice(1).split(",")[0].slice(0,25)||"";let t=e.slice(1).split(",")[1];return"solo"!==t&&"team"!==t&&(t=""),[a,t]};var G=t(167);var J=e=>r.a.createElement(G.a,{variant:"contained",onClick:e.onClick,disabled:e.disabled,color:e.type},e.children),K=t(176),V=t(168);const $=Object(_.a)(()=>({root:{background:"white"}}))(K.a);var q=e=>{const a=e.value,t=e.placeholder,n=e.onChange,o=e.onKeyDown;return r.a.createElement($,{type:"text",value:a,placeholder:t,onChange:n,onKeyDown:o,inputProps:{maxLength:25},startAdornment:r.a.createElement(V.a,{position:"start"},r.a.createElement(O.a,null))})};const Q=Object(_.a)(()=>({root:{color:"black","&.Mui-focused":{color:"black"}}}))(W.a),X=Object(s.a)(()=>({root:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"550px",padding:"10px",background:"rgba(0, 0, 0, 0.1)",boxShadow:"0px 0px 5px 4px rgba(0, 0, 0, 0.1)"}}));var Y=e=>{const a=r.a.useState(e.defaultName||""),t=Object(i.a)(a,2),n=t[0],o=t[1],l=r.a.useState(e.defaultLeaderboardName||"solo"),c=Object(i.a)(l,2),s=c[0],d=c[1],m=X();r.a.useEffect(()=>{const e=e=>{const a=e.newURL.slice(e.newURL.indexOf("#")),t=A(a),n=Object(i.a)(t,1)[0];o(n)};return window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}});return r.a.createElement("div",{className:m.root},r.a.createElement(q,{value:n,onChange:e=>{o((null===e||void 0===e?void 0:e.target).value)},onKeyDown:a=>{13!==a.which||e.isLoading||n.length<3||e.onSubmit(n.trim(),s)}}),r.a.createElement("div",null,r.a.createElement(z.a,{component:"fieldset"},r.a.createElement(Q,null,"Leaderboard"),r.a.createElement(F.a,{"aria-label":"leaderboard",name:"leaderboard1",value:s,onChange:e=>{d(e.target.value)}},r.a.createElement(U.a,{value:"solo",control:r.a.createElement(B.a,null),label:"Solo"}),r.a.createElement(U.a,{value:"team",control:r.a.createElement(B.a,null),label:"Team"})))),r.a.createElement(J,{type:"primary",disabled:e.isLoading||n.length<3,onClick:()=>{e.onSubmit(n,s)}},"Search"))};const Z=Object(s.a)({root:{display:"flex",justifyContent:"center"},subRoot:{padding:"10px",width:"550px",background:"rgba(0, 0, 0, 0.1)",boxShadow:"0px 0px 5px 4px rgba(0, 0, 0, 0.1)",color:"white",lineHeight:"2"},playerLink:{background:"rgba(255, 255, 255, 0.5)",borderRadius:"5px",padding:"5px",color:"black"}});var ee=e=>{const a=Z();return 0===e.numRecords?r.a.createElement("div",null):r.a.createElement("div",{className:a.root},r.a.createElement("div",{className:a.subRoot},e.numGames," games, ",e.numRecords," opponents, leaderboard"," ",r.a.createElement("span",{className:a.playerLink},e.leaderboardName.toUpperCase())," ","for player"," ",r.a.createElement("span",{className:a.playerLink},r.a.createElement(S,{playerId:e.playerId,playerName:e.playerName}))))};const ae=Object(s.a)({root:{padding:"10px",background:"rgba(0, 0, 0, 0.1)",boxShadow:"0px 0px 5px 4px rgba(0, 0, 0, 0.1)",width:"550px",overflow:"hidden"},tableContainer:{display:"flex",justifyContent:"center"},table:{background:"rgba(0, 0, 0, 0.4)",boxShadow:"0px 0px 5px 4px rgba(0, 0, 0, 0.4)",padding:"10px",marginTop:"16px",color:"white"},inProgress:{color:m.palette.status.neutral,background:"black",padding:"5px",borderRadius:"5px"},victory:{color:m.palette.status.success,background:"black",padding:"5px",borderRadius:"5px"},loss:{color:m.palette.status.danger,background:"black",padding:"5px",borderRadius:"5px"},cell:{padding:"5px"}});var te=e=>{const a=ae();return r.a.createElement("div",{className:a.root},"Most Recent Game"," ",e.inProgress?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:a.inProgress},"In Progress")," ",r.a.createElement("span",null," Game Id: ",e.matchId)):null,!e.inProgress&&e.isWin?r.a.createElement("span",{className:a.victory},"Victory"):null,e.inProgress||e.isWin?null:r.a.createElement("span",{className:a.loss},"Loss"),r.a.createElement("div",{className:a.tableContainer},r.a.createElement("table",{className:a.table},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{style:{minWidth:"180px",textAlign:"left"}},e.playerName,"'s Team"),r.a.createElement("th",null,"Opposing Team"))),r.a.createElement("tbody",null,e.otherTeamPlayers.map((t,n)=>{const o=e.myTeamPlayers[n];return r.a.createElement("tr",{key:"row-"+n},r.a.createElement("td",{className:a.cell,style:{textAlign:"left"}},r.a.createElement(S,{playerId:o.profileId,playerName:"".concat(o.name," (").concat(o.rating,")"),light:!0})),r.a.createElement("td",{className:a.cell,style:{textAlign:"right"}},r.a.createElement(S,{playerId:t.profileId,playerName:"".concat(t.name," (").concat(t.rating,")"),light:!0})))})))))},ne=t(37),re=t.n(ne),oe=t(51),le=t(75),ie=t.n(le);const ce=window.location.origin;let se={};const de={},me=ie.a.create({baseURL:ce}),pe=(e,a,t)=>e+"/"+a+"/"+(t||""),ue=Object(c.a)(m),ge=Object(s.a)(e=>({app:{textAlign:"center",position:"relative"},appHeader:{fontSize:"1.5rem",color:"black",display:"flex",justifyContent:"center",position:"fixed",top:"0px",width:"100%",background:"#C39568"},headerSize:{position:"relative",height:"50px",minWidth:"1000px",display:"flex",justifyContent:"space-between"},headerLeft:{display:"flex",justifyContent:"flex-start",alignItems:"center",height:"100%",color:"white",padding:"0px 10px",background:"rgba(0, 0, 0, 0.1)",boxShadow:"0px -4px 5px 4px rgba(0, 0, 0, 0.1)"},headerRight:{display:"flex",justifyContent:"flex-end",alignItems:"center",height:"100%"},headerIcon:{width:"24px",cursor:"pointer",marginLeft:"10px",borderRadius:"24px",background:"rgba(0, 0, 0, 0.1)",boxShadow:"0px 0px 5px 4px rgba(0, 0, 0, 0.1)",transition:"background 0.5s, box-shadow 0.5s","&:hover":{background:"rgba(0, 0, 0, 0.3)",boxShadow:"0px 0px 5px 4px rgba(0, 0, 0, 0.3)"}},pageContent:{marginTop:"50px"},backgroundImageContainer:{display:"flex",justifyContent:"center"},backgroundImage:{position:"fixed",zIndex:-1,opacity:.25,[e.breakpoints.up("xl")]:{width:"3072px"}},playerNameInputContainer:{display:"flex",justifyContent:"center",marginTop:"2rem"},currentGameContainer:{marginTop:"2rem",display:"flex",justifyContent:"center"},infoContainer:{marginTop:"2rem"},tableContainer:{display:"flex",justifyContent:"center",marginTop:"2rem"},tableSize:{minWidth:"1000px",marginBottom:"5rem"},errorText:{color:e.palette.error.main},appFooter:{position:"absolute",bottom:0,margin:"2rem",width:"calc(100% - 4rem)"}}));let be=!1;var he=()=>{const e=ge(),a=A(window.location.hash),t=Object(i.a)(a,2),o=t[0],l=t[1],c=r.a.useState(o),s=Object(i.a)(c,2),m=s[0],p=s[1],u=r.a.useState(l),g=Object(i.a)(u,2),b=g[0],h=g[1];r.a.useEffect(()=>{const e=e=>{if(be)be=!1;else if(e.newURL!==e.oldURL&&e.newURL.includes(window.location.hostname)){const a=e.newURL.slice(e.newURL.indexOf("#")),t=A(a),n=Object(i.a)(t,2),r=n[0],o=n[1];p(r),p(r),h(o)}};return window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}});const f=(e,a)=>e?"lookup/".concat(e,"/").concat(a):"",x=function(e,a){const t=Object(n.useState)(null),r=Object(i.a)(t,2),o=r[0],l=r[1],c=Object(n.useState)(!0),s=Object(i.a)(c,2),d=s[0],m=s[1],p=Object(n.useState)(!1),u=Object(i.a)(p,2),g=u[0],b=u[1];Object(n.useEffect)(()=>{(function(){var t=Object(oe.a)(re.a.mark((function t(){var n,r,o;return re.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=5;break}return l(null),m(!1),b(!1),t.abrupt("return");case 5:if(n=pe("GET",e,JSON.stringify(a)),!(r=se[n])){t.next=13;break}l(r),m(!1),b(!1),t.next=34;break;case 13:if(de[n]){t.next=34;break}return t.prev=14,de[n]=!0,m(!0),t.next=19,me.get(e,{params:a});case 19:o=t.sent,l(o),b(!1),m(!1),de[n]=!1,se[n]=o,t.next=34;break;case 28:t.prev=28,t.t0=t.catch(14),console.error("Failed to get",t.t0),b(!0),m(!1),l(null);case 34:case"end":return t.stop()}}),t,null,[[14,28]])})));return function(){return t.apply(this,arguments)}})()()},[e,a]);return[o,d,g,pe("GET",e,JSON.stringify(a))]}(f(m,b)),E=Object(i.a)(x,3),y=E[0],k=E[1],v=E[2];return r.a.createElement(d.a,{theme:ue},r.a.createElement("div",{className:e.app},r.a.createElement("div",{className:e.pageContent},r.a.createElement("div",{className:e.backgroundImageContainer},r.a.createElement("img",{src:"/static/background.jpg",className:e.backgroundImage,alt:"bg"})),r.a.createElement("div",{className:e.playerNameInputContainer},r.a.createElement(Y,{isLoading:k,onSubmit:(e,a)=>{const t=pe(f(e,a),"");var n,r;(n=t)?se[n]&&delete se[n]:se={},p(e),h(a),r="".concat(e,",").concat(a),be=!0,window.location.hash=r},defaultName:o,defaultLeaderboardName:l})),r.a.createElement("div",{className:e.currentGameContainer},!k&&(null===y||void 0===y?void 0:y.data.most_recent_game)?r.a.createElement(te,((e,a)=>{let t=e,n=null;const r=a.players.reduce((a,r)=>r.profile_id===e?(t=r.name,n=r.won,r.team):a,1),o=a.players.filter(e=>e.team===r).map(e=>({profileId:e.profile_id,name:e.name,rating:e.rating})),l=a.players.filter(e=>e.team!==r).map(e=>({profileId:e.profile_id,name:e.name,rating:e.rating}));return{playerId:e,playerName:t,matchId:a.match_id,inProgress:null===n||!a.finished,isWin:!!n,myTeamPlayers:o,otherTeamPlayers:l,date:new Date(1e3*a.started).toLocaleString()}})(null===y||void 0===y?void 0:y.data.profile_id,null===y||void 0===y?void 0:y.data.most_recent_game)):null),r.a.createElement("div",{className:e.infoContainer},k?null:r.a.createElement(ee,{playerName:null===y||void 0===y?void 0:y.data.player_name,playerId:null===y||void 0===y?void 0:y.data.profile_id,leaderboardName:b,numRecords:Object.keys((null===y||void 0===y?void 0:y.data.tracker.records)||{}).length,numGames:(null===y||void 0===y?void 0:y.data.tracker.wins)+(null===y||void 0===y?void 0:y.data.tracker.losses)})),r.a.createElement("div",{className:e.tableContainer},r.a.createElement("div",{className:e.tableSize},m?r.a.createElement(H,{loading:k,error:v,data:null===y||void 0===y?void 0:y.data,leaderboardName:b}):null)),r.a.createElement("header",{className:e.appHeader},r.a.createElement("div",{className:e.headerSize},r.a.createElement("div",{className:e.headerLeft},"AOE2: DE Head2Head - Matchup Tracker"),r.a.createElement("div",{className:e.headerRight},r.a.createElement("img",{src:"static/aoe2net.png",alt:"aoe2net",title:"aoe2.net",className:e.headerIcon,onClick:()=>{window.open("https://aoe2.net/")}}),r.a.createElement("img",{src:"static/github.png",alt:"github",title:"github",className:e.headerIcon,onClick:()=>{window.open("https://github.com/benjamin-t-brown/aoe2de_head2head")}})))),r.a.createElement("footer",{className:e.appFooter},"This site is not affiliated with or endorsed by Microsoft Corporation. Age of Empires II: Definitive Edition is a trademark or registered trademark of Microsoft Corporation in the U.S. and other countries."))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(he,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})},85:function(e,a,t){e.exports=t(112)}},[[85,1,2]]]);
//# sourceMappingURL=main.chunk.js.map